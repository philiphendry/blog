---
author: philiphendry
comments: true
date: 2009-12-22 21:17:34+00:00
layout: post
slug: sending-and-receiving-json-between-jquery-and-asp-net-mvc-using-ajax
title: Sending and Receiving JSON between jQuery and ASP.NET MVC using Ajax.
wordpress_id: 300
categories:
- ASP.NET MVC
- jQuery
---

It’s taken me a while to get this working without any problems so it’s worth jotting down how it all works. I don’t think I was trying to do anything particularly difficult – just receive Json from an ASP.NET MVC application using jQuery then submitted but the APIs had to be coerced into just the correct way to get it functional.

 

### Receiving Json from ASP.NET MVC using jQuery

 

First up, here’s the Json format I’m trying to send and receive :

 
    
    <span style="color:#0000FF;">var</span><span style="color:#000000;"> _shiftPattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> {
      </span><span style="color:#000000;">'</span><span style="color:#000000;">employee</span><span style="color:#000000;">'</span><span style="color:#000000;">: {</span><span style="color:#000000;">'</span><span style="color:#000000;">name</span><span style="color:#000000;">'</span><span style="color:#000000;"> : </span><span style="color:#000000;">'</span><span style="color:#000000;">Jason Wright</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">number</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">1234</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">contractedHours</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">39.0</span><span style="color:#000000;"> },
      </span><span style="color:#000000;">'</span><span style="color:#000000;">stepSize</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">0.5</span><span style="color:#000000;">,
      </span><span style="color:#000000;">'</span><span style="color:#000000;">days</span><span style="color:#000000;">'</span><span style="color:#000000;">: [
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Sunday</span><span style="color:#000000;">'</span><span style="color:#000000;">,    </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Monday</span><span style="color:#000000;">'</span><span style="color:#000000;">,    </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Tuesday</span><span style="color:#000000;">'</span><span style="color:#000000;">,   </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Wednesday</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Thursday</span><span style="color:#000000;">'</span><span style="color:#000000;">,  </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Friday</span><span style="color:#000000;">'</span><span style="color:#000000;">,    </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] },
          { </span><span style="color:#000000;">'</span><span style="color:#000000;">day</span><span style="color:#000000;">'</span><span style="color:#000000;">: </span><span style="color:#000000;">'</span><span style="color:#000000;">Saturday</span><span style="color:#000000;">'</span><span style="color:#000000;">,  </span><span style="color:#000000;">'</span><span style="color:#000000;">pattern</span><span style="color:#000000;">'</span><span style="color:#000000;">: [</span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">p</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">b</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">'</span><span style="color:#000000;">w</span><span style="color:#000000;">'</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;">, </span><span style="color:#000000;">''</span><span style="color:#000000;"> ] }
      ]
    };</span>





Note that I’ve opted to maintain Javascript standards by using camel casing – that caused a bit of trouble and I’ll show the problem and work-around later.





The jQuery to fetch this Json is trivial :




    
    <span style="color:#000000;">$(document).ready(</span><span style="color:#0000FF;">function</span><span style="color:#000000;">() {
      $.getJSON(</span><span style="color:#000000;">"</span><span style="color:#000000;">/willingtowork/shiftpattern/1234</span><span style="color:#000000;">"</span><span style="color:#000000;">, </span><span style="color:#0000FF;">null</span><span style="color:#000000;">, </span><span style="color:#0000FF;">function</span><span style="color:#000000;">(data) {
          _shiftPattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> data;
          renderModel();
      });
    });
    </span>





…and ASP.NET MVC controller action looks like this :




    
    <span style="color:#0000FF;">public</span><span style="color:#000000;"> ActionResult ShiftPattern(</span><span style="color:#0000FF;">int</span><span style="color:#000000;"> id)
    {
        </span><span style="color:#0000FF;">return</span><span style="color:#000000;"> Content(JsonHelper.Serialize(
            </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> WillingToWork
            {
                Employee </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Employee { Name </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Jason Wright</span><span style="color:#800000;">"</span><span style="color:#000000;">, Number </span><span style="color:#000000;">=</span><span style="color:#000000;"> id, ContractedHours </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800080;">39.0f</span><span style="color:#000000;"> },
                StepSize </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800080;">0.5f</span><span style="color:#000000;">,
                Days </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#000000;">Day</span><span style="color:#000000;">></span><span style="color:#000000;"> {
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Sun</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Mon</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Tue</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Wed</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Thu</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">b</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Fri</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">p</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }},
                    </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> Day { DayName </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Sat</span><span style="color:#800000;">"</span><span style="color:#000000;">, Pattern </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> {</span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">"</span><span style="color:#800000;">w</span><span style="color:#800000;">"</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;">, </span><span style="color:#800000;">""</span><span style="color:#000000;"> }}
                }
            }
        ), </span><span style="color:#800000;">"</span><span style="color:#800000;">application/json; charset=utf-8</span><span style="color:#800000;">"</span><span style="color:#000000;">);
    }</span>









In this test code I’ve hard-coded some object initialisations but the real issue for me here was originally choosing to use a JsonResult by calling Json() on the Mvc Controller Base but I’ve replaced it with a ContentResult and serialised the Json manually – more on that later.





The code below defines the data transfer objects I’m using to strongly type the Json in C#. Note I’ve implemented IExtensibleDataObject so that any additional data added to the Json in the javascript that I haven’t accounted for is ignored but still maintained if necessary (you may choose to remove this if you want to be strict but any extra data will cause an exception during deserialising.) I might also implement all properties as virtual to enable mocking frameworks (an alternative to defining interfaces which would be a bit complicated for DTOs) but that’s not shown here.





The main point to notice with the DataContract below is the use of DataMemberAttribute and its ability to rename properties – this is how I’m maintaining Pascal casing in C# and Camel casing for the serialised Json.




    
    <span style="color:#000000;">[DataContract]
    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> WillingToWork : IExtensibleDataObject
    {
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">employee</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> Employee Employee { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">days</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#000000;">Day</span><span style="color:#000000;">></span><span style="color:#000000;"> Days { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">stepSize</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">float</span><span style="color:#000000;"> StepSize { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">virtual</span><span style="color:#000000;"> ExtensionDataObject ExtensionData { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    }
    
    [DataContract]
    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> Day : IExtensibleDataObject
    {
       [DataMember(Name </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">pattern</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> List</span><span style="color:#000000;"><</span><span style="color:#0000FF;">string</span><span style="color:#000000;">></span><span style="color:#000000;"> Pattern { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       [DataMember(Name </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">day</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">string</span><span style="color:#000000;"> DayName { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">virtual</span><span style="color:#000000;"> ExtensionDataObject ExtensionData { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    }
    
    [DataContract]
    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> Employee :IExtensibleDataObject
    {
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">contractedHours</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">float</span><span style="color:#000000;"> ContractedHours { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">name</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">string</span><span style="color:#000000;"> Name { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       [DataMember(Name</span><span style="color:#000000;">=</span><span style="color:#800000;">"</span><span style="color:#800000;">number</span><span style="color:#800000;">"</span><span style="color:#000000;">)] </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">int</span><span style="color:#000000;"> Number { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">virtual</span><span style="color:#000000;"> ExtensionDataObject ExtensionData { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    }</span>





… and here lies a problem. When I was using the ASP.NET MVC JsonResult, the Json simply would not serialise using the names I’d provided in the DataMember and instead used the property name.





I’d already seen how to use the DataContractJsonSerializer() to manually create test code which correctly used the DataMemberAttribute() name property so I was wondering why JsonResult() wasn’t doing the same. Taking a look with reflector showed the following code in the JsonResult():




    
    <span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">override</span><span style="color:#000000;"> </span><span style="color:#0000FF;">void</span><span style="color:#000000;"> ExecuteResult(ControllerContext context)
    {
        </span><span style="color:#0000FF;">if</span><span style="color:#000000;"> (context </span><span style="color:#000000;">==</span><span style="color:#000000;"> </span><span style="color:#0000FF;">null</span><span style="color:#000000;">)
        {
            </span><span style="color:#0000FF;">throw</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> ArgumentNullException(</span><span style="color:#800000;">"</span><span style="color:#800000;">context</span><span style="color:#800000;">"</span><span style="color:#000000;">);
        }
        HttpResponseBase response </span><span style="color:#000000;">=</span><span style="color:#000000;"> context.HttpContext.Response;
        </span><span style="color:#0000FF;">if</span><span style="color:#000000;"> (</span><span style="color:#000000;">!</span><span style="color:#0000FF;">string</span><span style="color:#000000;">.IsNullOrEmpty(</span><span style="color:#0000FF;">this</span><span style="color:#000000;">.ContentType))
        {
            response.ContentType </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">this</span><span style="color:#000000;">.ContentType;
        }
        </span><span style="color:#0000FF;">else</span><span style="color:#000000;">
        {
            response.ContentType </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">application/json</span><span style="color:#800000;">"</span><span style="color:#000000;">;
        }
        </span><span style="color:#0000FF;">if</span><span style="color:#000000;"> (</span><span style="color:#0000FF;">this</span><span style="color:#000000;">.ContentEncoding </span><span style="color:#000000;">!=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">null</span><span style="color:#000000;">)
        {
            response.ContentEncoding </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">this</span><span style="color:#000000;">.ContentEncoding;
        }
        </span><span style="color:#0000FF;">if</span><span style="color:#000000;"> (</span><span style="color:#0000FF;">this</span><span style="color:#000000;">.Data </span><span style="color:#000000;">!=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">null</span><span style="color:#000000;">)
        {
            JavaScriptSerializer serializer </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> JavaScriptSerializer();
            response.Write(serializer.Serialize(</span><span style="color:#0000FF;">this</span><span style="color:#000000;">.Data));
        }
    }
    
    </span>





The problem in this code is the use of the JavaScriptSerializer() which is now marked obsolete (although that seems to be questionable) and doesn’t handle the DataMemberAttribute(). Rather than try to work around this too cleverly I’ve used the ContentResult() instead passing a Json string serialized from a helper using the DataContractJsonSerializer() and making sure to pass the content type. Here’s the serializer helper (not exactly rocket science):






  
    
    <span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> JsonHelper
    {
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">static</span><span style="color:#000000;"> </span><span style="color:#0000FF;">string</span><span style="color:#000000;"> Serialize</span><span style="color:#000000;"><</span><span style="color:#000000;">T</span><span style="color:#000000;">></span><span style="color:#000000;">(T obj)
       {
           var serializer </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> DataContractJsonSerializer(obj.GetType());
           var ms </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> MemoryStream();
           serializer.WriteObject(ms, obj);
           </span><span style="color:#0000FF;">return</span><span style="color:#000000;"> Encoding.Default.GetString(ms.ToArray());
       }
    }</span>








### Posting Json using jQuery back to an ASP.NET MVC Controller





The next step was finishing the loop and allowing the client to post back the Json data in order for it to be persisted. Here’s the jQuery in the client:




    
    <span style="color:#0000FF;">function</span><span style="color:#000000;"> saveModel() {
      $.ajax({
          url: </span><span style="color:#000000;">"</span><span style="color:#000000;">/willingtowork/save</span><span style="color:#000000;">"</span><span style="color:#000000;">,
          type: </span><span style="color:#000000;">"</span><span style="color:#000000;">POST</span><span style="color:#000000;">"</span><span style="color:#000000;">,
          data: JSON.stringify(_shiftPattern),
          dataType : </span><span style="color:#000000;">"</span><span style="color:#000000;">json</span><span style="color:#000000;">"</span><span style="color:#000000;">,
          contentType: </span><span style="color:#000000;">"</span><span style="color:#000000;">application/json; charset=utf-8</span><span style="color:#000000;">"</span><span style="color:#000000;">,
          success: </span><span style="color:#0000FF;">function</span><span style="color:#000000;">(data, textStatus) {
              alert(data.result);
          },
          error: </span><span style="color:#0000FF;">function</span><span style="color:#000000;">(request, textStatus, errorThrown) {
              alert(request.responseText);
          }
      });
    }
    </span>





And the controller action that receives this:




    
    <span style="color:#000000;">[JsonFilter(Param </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">data</span><span style="color:#800000;">"</span><span style="color:#000000;">, RootType </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">typeof</span><span style="color:#000000;">(WillingToWork))]
    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> ActionResult Save(WillingToWork data)
    {
      </span><span style="color:#0000FF;">return</span><span style="color:#000000;"> Json(</span><span style="color:#0000FF;">new</span><span style="color:#000000;"> {result </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#800000;">"</span><span style="color:#800000;">Success</span><span style="color:#800000;">"</span><span style="color:#000000;"> });
    }</span>





The key here is the JsonFilterAttribute()




    
    <span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> JsonFilter : ActionFilterAttribute
    {
    
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">string</span><span style="color:#000000;"> Param { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> Type RootType { </span><span style="color:#0000FF;">get</span><span style="color:#000000;">; </span><span style="color:#0000FF;">set</span><span style="color:#000000;">; }
    
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">override</span><span style="color:#000000;"> </span><span style="color:#0000FF;">void</span><span style="color:#000000;"> OnActionExecuting(ActionExecutingContext filterContext)
       {
           </span><span style="color:#0000FF;">if</span><span style="color:#000000;"> (</span><span style="color:#000000;">!</span><span style="color:#000000;">(filterContext.HttpContext.Request.ContentType </span><span style="color:#000000;">??</span><span style="color:#000000;"> </span><span style="color:#0000FF;">string</span><span style="color:#000000;">.Empty).Contains(</span><span style="color:#800000;">"</span><span style="color:#800000;">application/json</span><span style="color:#800000;">"</span><span style="color:#000000;">)) </span><span style="color:#0000FF;">return</span><span style="color:#000000;">;
           filterContext.ActionParameters[Param] </span><span style="color:#000000;">=</span><span style="color:#000000;"> JsonHelper.Deserialize</span><span style="color:#000000;"><</span><span style="color:#000000;">WillingToWork</span><span style="color:#000000;">></span><span style="color:#000000;">(filterContext.HttpContext.Request.InputStream);
       }
    }
    
    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> JsonHelper
    {
       </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">static</span><span style="color:#000000;"> T Deserialize</span><span style="color:#000000;"><</span><span style="color:#000000;">T</span><span style="color:#000000;">></span><span style="color:#000000;">(Stream sr)
       {
           var serializer </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000FF;">new</span><span style="color:#000000;"> DataContractJsonSerializer(</span><span style="color:#0000FF;">typeof</span><span style="color:#000000;"> (T));
           </span><span style="color:#0000FF;">return</span><span style="color:#000000;"> (T) serializer.ReadObject(sr);
       }
    }</span>





I sourced the JsonFilter from an article online although I’ve lost the reference now but I’m very grateful to whoever it was!!! I’ve also renamed the filter itself and changed it to use a helper for the deserializing. However, that filter does turn a Json string into a typed object with very little plumbing.





And that’s it!! Phew, it took a while and in the end the code needed to complete it is fairly simple. At some point I’ll probably create a new ActionResult() that wraps up the serializing using DataContractJsonSerializer() so that it’s not necessary to remember to use a ContentResult(), serializer and content type!!! Yeuck!
